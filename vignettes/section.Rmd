---
title: "How to create a section"
output: rmarkdown::html_vignette
date: "`r Sys.Date()`"
vignette: >
    %\VignetteIndexEntry{How to create a section}
    %\VignetteEngine{knitr::rmarkdown}
    %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo=FALSE}
library(qti)
```

## Overview of Sections in `qti`

A test in QTI typically consists of one or more Sections. Each Section can contain a combination of exercises or other subsections, providing flexibility in test design. Sections can be customized with respect to various parameters, such as timing and shuffling.

**Recommendation**: To minimize conflicts between different Section parameters, it is advisable to include a single root Section in each test.

As sources of exercises within Sections, you have the following options:

- **Rmd (md) files**: You can use markdown files to provide exercises.

- **XML files**: These files should adhere to QTI requirements.

- **Objects of S4 `qti` classes**: You can utilize objects from the `qti` package.


##  Creating diverse test variants

Using Rmd files for dynamically generating task content offers creators an opportunity to form different variations of exercises and their combinations. In QTI, creators can generate different test variants in two ways: by variants and by files.

![Two approaches to the organization of the root section](sections_scheme1.png){width=80%}

##  Using function `section()` to create root section with variants

Use function `sectioin()` to create and customize root section. It returns `AssessmentSection` qti-object, which you will use as a test content further.

Inside `section()` put `file` value as a vector of your sources of exercises. Assign a number of desired variants into `num_variants`parameter. And determine which approach ("by variant" or "by files") you are going to use - the `nested `parameter is responsible for this:

1. For "by variant" (left scheme on the picture) use `nested = True`:

```{r eval=FALSE}
files = c(file_1, file_2, file_3, file_4)
root_section = section(file = files, num_variants = 3, nested = True)
```

1. For "by files" (right scheme) use `nested = False`:
```{r eval=FALSE}
files = c(file_1, file_2, file_3, file_4)
root_section = section(file = files, num_variants = 3, nested = False)
```


## Full list of `section()` parameters

### file

vector of Rmd, md, or xml files.

### num_variants

The number of variants in root Section.

### seed_number

The seed numbers to reproduce the result of calculations. By default they will be generated by randomization and added into identifier value.

### id

This is the identifier of the root section, useful for later data analysis of results. If you are doing extensive data analysis later on, it makes sense to specify a meaningful identifier. Expecially in case applying `section()` to create subsections in root section.

### nested

Defines the approach of combining exercises by variants.

### expected_lines

Defines the number of lines of the text input field.

### selection

Integer value tha defines how many children of the section are delivered in test. In case of forming root section do not use it, `nested` handles the right values.

### title

The title of the section.

### time_limits

Integer value that controls the amount of time in minutes a candidate is allowed for this part of the test.

### visible

Boolean, in case of `TRUE` (default) it shows this section in hierarchy of test structure.

### shuffle

Boolean, that is responsible to randomize the order in which the assessment items and subsections are initially presented to the candidate. Default is `FALSE`.

### max_attempts

Integer value, enables the maximum number of attempts, that candidate is allowed to pass in this section.

### allow_comment

Boolean, enables to allow candidate to leave comments in each question of the section. Default is `TRUE`

## Some advice on essay exercises 

TODO
