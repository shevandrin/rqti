<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rqti OOP Model â€¢ rqti</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rqti OOP Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rqti</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Create Rmd exercises</h6></li>
    <li><a class="dropdown-item" href="../articles/singlechoice.html">Single Choice tasks</a></li>
    <li><a class="dropdown-item" href="../articles/multiplechoice.html">Multiple Choice tasks</a></li>
    <li><a class="dropdown-item" href="../articles/gap.html">Gap tasks</a></li>
    <li><a class="dropdown-item" href="../articles/dropdown.html">Dropdown tasks</a></li>
    <li><a class="dropdown-item" href="../articles/essay.html">Essay tasks</a></li>
    <li><a class="dropdown-item" href="../articles/order.html">Order tasks</a></li>
    <li><a class="dropdown-item" href="../articles/directedpairs.html">Directed Pair tasks</a></li>
    <li><a class="dropdown-item" href="../articles/table.html">Table tasks</a></li>
    <li><a class="dropdown-item" href="../articles/adding_metadata.html">Adding metadata</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Create sections and tests</h6></li>
    <li><a class="dropdown-item" href="../articles/section.html">Sections and Tests</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>API</h6></li>
    <li><a class="dropdown-item" href="../articles/api_opal.html">Working with the OPAL API</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>S4 rqti classes</h6></li>
    <li><a class="dropdown-item" href="../articles/rqti_oop_model.html">rqti OOP Model</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/compatibility.html">Compatibility with Learning Management Systems</a></li>
    <li><a class="dropdown-item" href="../articles/imported_packages.html">Imported Packages</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/shevandrin/rqti/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>rqti OOP Model</h1>
            
            <h4 data-toc-skip class="date">2025-03-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/shevandrin/rqti/blob/v1.0.0/vignettes/rqti_oop_model.Rmd" class="external-link"><code>vignettes/rqti_oop_model.Rmd</code></a></small>
      <div class="d-none name"><code>rqti_oop_model.Rmd</code></div>
    </div>

    
    
<style>
  .zoomable-image {
    position: relative;
  }
  .zoomable-image img {
    width: 100%; /* Adjust the image size as needed */
    height: auto;
  }
  .zoomable-image img:hover {
    transform: scale(1.2); /* Adjust the zoom level as needed */
    transition: transform 0.3s; /* Adjust the transition duration as needed */
  }
</style>
<p>The Rmd interface of <code>rqti</code> is excellent for quickly
getting started, but it has some drawbacks. First, it can be quite slow,
as the Rmd file must be converted to HTML before it can be used. This
delay is especially noticeable when generating several versions of
multiple tasks. Additionally, Rmd lacks flexibility in handling task
parameters. For instance, while it is possible to select specific
questions within a task by passing parameters during knitting, this
approach is not very convenient.</p>
<p>Another challenge with Rmd is storing and distributing the files, as
there is no standard method for doing so. While you can host the files
somewhere, there is no easy way for instructors to know when a new
version is available. Ultimately, while Rmd is great for readability, it
is not designed for rigorous programming. If you want to fully leverage
a programming language when creating exercises and exams, a programming
interface is a better choice.</p>
<p>The <code>rqti</code> package offers such an interface, as it uses S4
object-oriented programming (OOP) under the hood. This allows you to
create all task types as objects, providing greater flexibility and
faster performance. You can also share your tasks by creating an R
package. If you are content with Rmd, there is nothing wrong with
continuing to use it. However, if you are looking to take your work to
the next level, consider creating task objects directly.</p>
<p>First, check out the overview of our classes:</p>
<div class="zoomable-image">
<p><img src="images%2Fs4model.svg" alt="Class diagram S4"></p>
</div>
<p>The <code>rqti</code> class model consists of classes that represent
types of tasks:</p>
<ul>
<li><code><a href="../reference/SingleChoice-class.html">?SingleChoice</a></code></li>
<li><code><a href="../reference/MultipleChoice-class.html">?MultipleChoice</a></code></li>
<li><code><a href="../reference/Essay-class.html">?Essay</a></code></li>
<li><code><a href="../reference/Entry-class.html">?Entry</a></code></li>
<li><code><a href="../reference/Ordering-class.html">?Ordering</a></code></li>
<li><code><a href="../reference/DirectedPair-class.html">?DirectedPair</a></code></li>
<li><code><a href="../reference/MultipleChoiceTable-class.html">?MultipleChoiceTable</a></code></li>
<li><code><a href="../reference/OneInRowTable-class.html">?OneInRowTable</a></code></li>
<li><code><a href="../reference/OneInColTable-class.html">?OneInColTable</a></code></li>
</ul>
<p>In addition there are classes for the interaction elements of
tasks:</p>
<ul>
<li><code><a href="../reference/TextGap-class.html">?TextGap</a></code></li>
<li><code><a href="../reference/NumericGap-class.html">?NumericGap</a></code></li>
<li><code><a href="../reference/InlineChoice-class.html">?InlineChoice</a></code></li>
<li><code><a href="../reference/TextGapOpal-class.html">?TextGapOpal</a></code></li>
<li><code><a href="../reference/ModalFeedback-class.html">?ModalFeedback</a></code></li>
<li><code><a href="../reference/CorrectFeedback-class.html">?CorrectFeedback</a></code></li>
<li><code><a href="../reference/WrongFeedback-class.html">?WrongFeedback</a></code></li>
</ul>
<p>Finally, there are classes for tests and their sections:</p>
<ul>
<li><code><a href="../reference/AssessmentSection-class.html">?AssessmentSection</a></code></li>
<li><code><a href="../reference/AssessmentTest-class.html">?AssessmentTest</a></code></li>
<li><code><a href="../reference/AssessmentTestOpal-class.html">?AssessmentTestOpal</a></code></li>
</ul>
<div class="section level2">
<h2 id="creating-objects">Creating objects<a class="anchor" aria-label="anchor" href="#creating-objects"></a>
</h2>
<p>There are two ways to create objects:</p>
<ol style="list-style-type: decimal">
<li>A call to <code>new</code> with the corresponding class and
parameters.</li>
<li>Using constructor functions (recommended).</li>
</ol>
<p>Constructor functions share the same names as their corresponding
classes, with the first letter in lowercase. These constructors are
again categorized into tasks, interactions, and sections/tests.</p>
<p>The following functions create classes representing different types
of tasks:</p>
<ul>
<li><code><a href="../reference/singleChoice.html">?singleChoice</a></code></li>
<li><code><a href="../reference/multipleChoice.html">?multipleChoice</a></code></li>
<li><code><a href="../reference/essay.html">?essay</a></code></li>
<li><code><a href="../reference/entry.html">?entry</a></code></li>
<li><code><a href="../reference/ordering.html">?ordering</a></code></li>
<li><code><a href="../reference/directedPair.html">?directedPair</a></code></li>
<li><code><a href="../reference/multipleChoiceTable.html">?multipleChoiceTable</a></code></li>
<li><code><a href="../reference/OneInRowTable-class.html">?OneInRowTable</a></code></li>
<li><code><a href="../reference/oneInColTable.html">?oneInColTable</a></code></li>
</ul>
<p>The following functions create classes representing interactions
within tasks:</p>
<ul>
<li><code><a href="../reference/textGap_doc.html">?textGap</a></code></li>
<li><code><a href="../reference/numericGap_doc.html">?numericGap</a></code></li>
<li><code><a href="../reference/textGapOpal_doc.html">?textGapOpal</a></code></li>
<li><code><a href="../reference/modalFeedback.html">?modalFeedback</a></code></li>
<li><code><a href="../reference/correctFeedback.html">?correctFeedback</a></code></li>
<li><code><a href="../reference/wrongFeedback.html">?wrongFeedback</a></code></li>
</ul>
<p>The following functions create classes representing tests and their
sections:</p>
<ul>
<li><code><a href="../reference/assessmentSection.html">?assessmentSection</a></code></li>
<li><code><a href="../reference/assessmentTest.html">?assessmentTest</a></code></li>
<li><code><a href="../reference/assessmentTestOpal.html">?assessmentTestOpal</a></code></li>
</ul>
</div>
<div class="section level2">
<h2 id="creating-tasks">Creating tasks<a class="anchor" aria-label="anchor" href="#creating-tasks"></a>
</h2>
<p>First, it is important to know that you can create an object directly
from Rmd files:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scpath</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_package.html" class="external-link">path_package</a></span><span class="op">(</span><span class="st">"rmarkdown/templates/singlechoice-simple/skeleton"</span>, </span>
<span>                           <span class="st">"skeleton.Rmd"</span>, package <span class="op">=</span> <span class="st">"rqti"</span><span class="op">)</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu">rqti</span><span class="fu">:::</span><span class="fu"><a href="../reference/create_question_object.html">create_question_object</a></span><span class="op">(</span><span class="va">scpath</span><span class="op">)</span></span>
<span><span class="va">sc</span></span>
<span><span class="co">#&gt; An object of class "SingleChoice"</span></span>
<span><span class="co">#&gt; Slot "solution":</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "choices":</span></span>
<span><span class="co">#&gt; [1] "There is a 5% probability that you will mistakenly reject the null hypothesis, when it is actually correct. "</span></span>
<span><span class="co">#&gt; [2] "There is a 5% probability that the null hypothesis is correct."                                              </span></span>
<span><span class="co">#&gt; [3] "There is a 5% probability that you will mistakenly reject the alternative hypothesis, when it is correct."   </span></span>
<span><span class="co">#&gt; [4] "The test power is 95%."                                                                                      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "choice_identifiers":</span></span>
<span><span class="co">#&gt; [1] "ChoiceA" "ChoiceB" "ChoiceC" "ChoiceD"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "shuffle":</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "orientation":</span></span>
<span><span class="co">#&gt; [1] "vertical"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "identifier":</span></span>
<span><span class="co">#&gt; [1] "skeleton"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "title":</span></span>
<span><span class="co">#&gt; [1] "skeleton"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "content":</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] "&lt;p&gt;An alpha error of 5% means that:&lt;/p&gt;"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "prompt":</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "points":</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "feedback":</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; An object of class "ModalFeedback"</span></span>
<span><span class="co">#&gt; Slot "outcome_identifier":</span></span>
<span><span class="co">#&gt; [1] "FEEDBACKMODAL"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "show":</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "identifier":</span></span>
<span><span class="co">#&gt; [1] "modal_feedback"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "title":</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "content":</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] "&lt;p&gt;The correct interpretation is:&lt;/p&gt;"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] "&lt;p&gt;There is a 5% probability that you will mistakenly reject the null hypothesis, when it is correct.&lt;/p&gt;"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] "&lt;p&gt;This is based on the typical understanding of a 5% significance level in hypothesis testing, which means that you are willing to accept a 5% chance of making a Type I error.&lt;/p&gt;"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "files":</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "calculator":</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "metadata":</span></span>
<span><span class="co">#&gt; An object of class "QtiMetadata"</span></span>
<span><span class="co">#&gt; Slot "contributor":</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; An object of class "QtiContributor"</span></span>
<span><span class="co">#&gt; Slot "name":</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "role":</span></span>
<span><span class="co">#&gt; [1] "author"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "contribution_date":</span></span>
<span><span class="co">#&gt; Date of length 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "description":</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "rights":</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "version":</span></span>
<span><span class="co">#&gt; character(0)</span></span></code></pre></div>
<p>The structure of the object feels somewhat intimidating but is mostly
self-explanatory. For instance it has a slot named <code>solution</code>
and another one named <code>choices</code>. Other slots contain
additional objects such as a feedback or metadata object.</p>
<p>Now you can render this object with <code>render_qtijs</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">sc</span><span class="op">)</span></span></code></pre></div>
<p>You will notice that this approach is much faster than knitting, as
it eliminates intermediate steps. The XML file is generated directly
from the object representation and then copied to the qtijs server. No
need for Pandoc or any other translation tools.</p>
<p>But how would you create this object from scratch? This is not very
hard:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"There is a 5% probability that you will mistakenly reject the null</span></span>
<span><span class="st"> hypothesis, when it is actually correct."</span>,</span>
<span>  <span class="st">"There is a 5% probability that the null hypothesis is correct."</span>,</span>
<span>  <span class="st">"There is a 5% probability that you will mistakenly reject the alternative</span></span>
<span><span class="st"> hypothesis, when it is correct."</span>,</span>
<span>  <span class="st">"The test power is 95%."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sc2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/singleChoice.html">singleChoice</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="va">choices</span>, </span>
<span>                    content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"An alpha error of 5% means that:"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note that the content parameter is a list because it can also contain
non-strings. If you just put the text string, rqti will give you an
error. In the future we will simplify this case.</p>
<p>Again, you can render the object:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">sc2</span><span class="op">)</span></span></code></pre></div>
<p>It looks the same because it is almost the same:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">sc</span>, <span class="va">sc2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Attributes: &lt; Component \"calculator\": Lengths (0, 1) differ (string compare on first 0) &gt;"</span></span>
<span><span class="co">#&gt; [2] "Attributes: &lt; Component \"choices\": 2 string mismatches &gt;"                                 </span></span>
<span><span class="co">#&gt; [3] "Attributes: &lt; Component \"content\": Component 1: 1 string mismatch &gt;"                      </span></span>
<span><span class="co">#&gt; [4] "Attributes: &lt; Component \"feedback\": Length mismatch: comparison on first 0 components &gt;"  </span></span>
<span><span class="co">#&gt; [5] "Attributes: &lt; Component \"files\": Lengths (0, 1) differ (string compare on first 0) &gt;"     </span></span>
<span><span class="co">#&gt; [6] "Attributes: &lt; Component \"identifier\": 1 string mismatch &gt;"                                </span></span>
<span><span class="co">#&gt; [7] "Attributes: &lt; Component \"title\": 1 string mismatch &gt;"</span></span></code></pre></div>
<p>There are some differences in defaults, and we did not provide
feedback in this case, but overall, creating objects from scratch is
relatively straightforward. However, it becomes more challenging when
incorporating HTML, math, and images. These elements are seamlessly
handled by the Rmd-interface, but doing it from scratch requires more
effort.</p>
</div>
<div class="section level2">
<h2 id="using-html">Using html<a class="anchor" aria-label="anchor" href="#using-html"></a>
</h2>
<p>Let us add a feedback object, including some html formatting created
with htmltools:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/htmltools" class="external-link">htmltools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">text1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span></span>
<span>  <span class="st">"The correct interpretation is: "</span>, </span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">strong</a></span><span class="op">(</span><span class="st">"There is a 5% probability that you will mistakenly reject the null </span></span>
<span><span class="st"> hypothesis, when it is correct."</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">text2</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">details</span><span class="op">(</span></span>
<span>  <span class="va">tags</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="st">"More Information"</span><span class="op">)</span>,</span>
<span>  <span class="st">"This is based on the typical understanding of a 5% significance level in</span></span>
<span><span class="st"> hypothesis testing, which means that you are willing to accept a 5% chance of </span></span>
<span><span class="st"> making a Type I error."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modalFeedback.html">modalFeedback</a></span><span class="op">(</span>content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">text1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">text2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sc2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/singleChoice.html">singleChoice</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="va">choices</span>, </span>
<span>                     content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"An alpha error of 5% means that:"</span><span class="op">)</span>,</span>
<span>                     feedback <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fb</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Let us render the new task and activate the feedback in qtijs (you
might still need to reload the Viewer pane):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">sc2b</span>, preview_feedback <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>A couple of things should be noticed:</p>
<ul>
<li>we create the html tags with <code>htmltools</code>, but you can
also use raw html tags
(e.g.Â <code>&lt;strong&gt;my text&lt;/strong&gt;</code>)</li>
<li>details and summary tags are not available by default in htmltools,
so must be created with <code>tags$</code>
</li>
<li>the feedback must be created with the constructors, in this case
<code>modalFeedback</code>, which simply means that this feedback is
displayed independently of the number of points reached</li>
<li>the <code>feedback</code> parameter <code>content</code> can only
take lists</li>
<li>the <code>singleChoice</code> parameter <code>feedback</code> can
only take lists</li>
</ul>
<p>What if we want to add some math?</p>
</div>
<div class="section level2">
<h2 id="using-maths">Using maths<a class="anchor" aria-label="anchor" href="#using-maths"></a>
</h2>
<p>There are several ways to add formulas to your content, but the
simplest is to use latex syntax in html as per MathJax:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">math</span> <span class="op">&lt;-</span> <span class="st">r"(When \(a \ne 0\), there are two solutions to \(ax^2 + bx + c = 0\)</span></span>
<span><span class="st"> and they are $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$)"</span></span></code></pre></div>
<p>Note the use of <code>\(</code> and <code>\)</code> for inline math
and <code>$$</code> for displayed math. You cannot use <code>$</code>
for inline math as per MathJax syntax.</p>
<p>Further note the <code>r"(...)"</code>-syntax, which escapes special
characters automatically.</p>
<p>Let us render it, this time within an essay task:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/essay.html">essay</a></span><span class="op">(</span></span>
<span>    content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="va">math</span>, </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Provide a proof for this solution."</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Adding math is straightforward, but what about graphics?</p>
</div>
<div class="section level2">
<h2 id="using-graphics">Using graphics<a class="anchor" aria-label="anchor" href="#using-graphics"></a>
</h2>
<p>There are various ways to incorporate them. A simple method is to
save a plot or image as raw bytes and embed it directly in a html image
tag.</p>
<p>Let us first create a graph and save it in a temporary file:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">imgfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".png"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png</a></span><span class="op">(</span><span class="va">imgfile</span>, width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">600</span>, type <span class="op">=</span> <span class="st">"cairo"</span>, pointsize <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; agg_png </span></span>
<span><span class="co">#&gt;       2</span></span></code></pre></div>
<p>Now we can convert this to a raw byte string and put it inside image
tags using htmltools:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu">RCurl</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RCurl/man/base64.html" class="external-link">base64Encode</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">readBin</a></span><span class="op">(</span><span class="va">imgfile</span>, <span class="st">"raw"</span>,</span>
<span>                                   <span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.info</a></span><span class="op">(</span><span class="va">imgfile</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"size"</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                           <span class="st">"txt"</span><span class="op">)</span></span>
<span><span class="va">image</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">img</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"400"</span>, </span>
<span>                          src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"data:image/png;base64,"</span>, <span class="va">txt</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, let us add it to a simple gap task:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_with_img</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/entry.html">entry</a></span><span class="op">(</span></span>
<span>  content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Here is an illustration of the standard normal distribution:"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    <span class="va">image</span>, </span>
<span>    <span class="st">"&lt;p&gt;What proportion of values is between -1 and +1 SD of a normal distribution?"</span>,</span>
<span>    <span class="fu"><a href="../reference/numericGap_doc.html">gapNumeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, tolerance <span class="op">=</span> <span class="fl">1</span>, </span>
<span>               tolerance_type <span class="op">=</span> <span class="st">"relative"</span><span class="op">)</span>,</span>
<span>    <span class="st">"Round to two decimal points!"</span>,</span>
<span>    <span class="st">"&lt;/p&gt;"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>and render it:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">gap_with_img</span><span class="op">)</span></span></code></pre></div>
<p>A few things to keep in mind during this process:</p>
<ul>
<li>Ensure your image is well-prepared with the right aspect ratio,
resolution, etc.</li>
<li>You can use ggplot2 or other graphics libraries similarly.</li>
<li>Consider creating a helper function to decode the image into raw
bytes.</li>
<li>For gap tasks, the gap must be placed within the content parameter,
which makes using htmltools challenging. Currently, you need to use raw
HTML tags to surround the gaps.</li>
<li>Although the process is more complex than with Rmd, it gives you
greater control over both the image creation and its display in
HTML.</li>
<li>Future improvements will simplify the process with constructors. For
now, we need more experience and user feedback.</li>
</ul>
<p>We covered most aspects of creating tasks with constructor functions.
Let us now look at creating sections and tests:</p>
</div>
<div class="section level2">
<h2 id="creating-sections-and-tests">Creating sections and tests<a class="anchor" aria-label="anchor" href="#creating-sections-and-tests"></a>
</h2>
<p>Let us combine the tasks from above into a section:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">section1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assessmentSection.html">assessmentSection</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sc</span>, <span class="va">gap_with_img</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And render it:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">section1</span><span class="op">)</span></span></code></pre></div>
<p>There is not much to see here because we only have one section and
qtijs does not reveal the underlying structure. To illustrate better,
let us add another section and make a test:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">items</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/essay.html">essay</a></span><span class="op">(</span>content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Who was Ada Lovelace?"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>              <span class="fu"><a href="../reference/essay.html">essay</a></span><span class="op">(</span>content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Who was Grace Hopper?"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">section2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assessmentSection.html">assessmentSection</a></span><span class="op">(</span><span class="va">items</span>, selection <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">exam</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assessmentTest.html">assessmentTest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">section1</span>, <span class="va">section2</span><span class="op">)</span>, time_limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Render it:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/render_qtijs.html">render_qtijs</a></span><span class="op">(</span><span class="va">exam</span><span class="op">)</span></span></code></pre></div>
<p>What is happening here? There are two sections, but only one item is
selected from section 2. Additionally, a time limit has been imposed for
the test.</p>
<p>The flexibility to arrange and select items within sections, and
organize sections within tests, provides significant control over the
assessment process. You can create parallel versions of items and easily
develop custom exam functions that generate different versions of
tasks.</p>
<p>We have now covered the key constructor functions of the rqti
package. These functions empower you to build questions and exams from
scratch, giving you full control over the process. Moreover, this
approach allows you to package your questions and exams into standard R
packages, making distribution simple and efficient. While there is much
more to explore, you will need to dive deeper into the possibilities on
your own.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrey Shevandrin, Johannes Titz, Stiftung fÃ¼r Innovation in der Hochschullehre.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
